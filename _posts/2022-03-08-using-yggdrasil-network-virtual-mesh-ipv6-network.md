---
layout: post
title: "Yggdrasil network: a virtual mesh ipv6 network with tree-like routing"
categories: admin
---
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at https://mozilla.org/MPL/2.0/. -->
Yggdrasil is a easy way to connect different devices together. Each device has IPV6 address generated from their cryptographic keys, connect to known nodes on their configuration file, and use a tree-like routing scheme. Yggdrasil is also a superior TCP-over-TCP implementation [suppressing traditional OpenVPN and SSH forwarding](https://yggdrasil-network.github.io/2018/07/15/remote-access.html). Currently I use yggdrasil with several network applications, most notabaly [KDEConnect](https://kdeconnect.kde.org/).

## Yggdrasil Network
The yggdrasil network is a virtual, layered mesh IPV6 network with a special routing scheme for mesh network.
Yggdrasil use virtual IPV6 address generated from a crypographic key in a node's configuration file (can be generated by `yggdrasil -genconf`), and this virtual IPV6 address stays with the node running yggdrasil (in contrast to dynamically changing address based on geolocation and autonomous systems), enforce end-to-end encryption between nodes, and use a tree-like routing scheme based on DHT but uses address independent routing (see [Addressing and Name-Independent Routing](https://yggdrasil-network.github.io/2018/07/28/addressing.html) before v0.4 and [Preparing for Yggdrasil v0.4 #Routing](https://yggdrasil-network.github.io/2021/06/19/preparing-for-v0-4.html#routing) for routing scheme update after v0.4).

Yggdrasil does not connect to other nodes for you: yggdrasil is not something like bittorrent or similar. You must manually configure the nodes ("static peers") that you want to connect to at the Internet (for outcoming connection) and (possibly) listen at a port to accept incoming connection (your IP address and the port must be open to accept incoming connection). Yggdrasil only use the "real" internet connection you configured and does not do NAT traversal or peer discovery itself (though yggdrasil does connect to peers in the local network, but not over the whole Internet).

Yggdrasil however is publicly addressable (using the routing scheme discussed above), and yggdrasil makes your devices easily avaliable over the Internet. Once connected to the yggdrasil network, the nodes can accept outcoming and incoming connection using the yggdrasil IPV6 address, at any port, regardless of whether the node can accept incoming connection in "real" IP address, and which port the node opens in "real" IP address (as long as the port used by yggdrasil is not blocked).

Yggdrasil makes accepting connections from a small list of devices trivial: because yggdrasil IPV6 address stays unchanged unless the devices' private key is regenerated, and the IPV6 address is generated from a cryptographic hash of the public key, each node running yggdrasil is authenticated by the private-public key pair on each device,  you can authenticate devices by simply use standard firewall utilities like [firewalld](https://firewalld.org/) to filter connections from known yggdrasil IP addresses. On the "real" Internet IP address is only roughly related to geolocation and unrelated to actual devices at all, making authentication much more complex. (Yggdrasil provides end-to-end encryption at IP protocol level)

Yggdrasil is a superior TCP-over-TCP implementation and also a superior virtual network implementation: even not considering the entire yggdrasil network, you can use yggdrasil as a intranet penetration tool. Once the devices is connected to the yggdrasil network (by connecting to a public peer from yggdrasil project, or to your custom server), you can connect to the devices from anywhere in the yggdrasil network, as if the devices behind NAT have a public IP address and can accept incoming connection. Yggdrasil have performance [suppressing traditional OpenVPN and SSH forwarding](https://yggdrasil-network.github.io/2018/07/15/remote-access.html).

## Use yggdrasil with KDEConnect

## Use yggdrasil with firewall to unblock internal ports

[qbittorrent](https://www.qbittorrent.org/)
[radicale](https://radicale.org)  (a CAlDAV and CardDAV server)
